FROM python:3.10-slim-bullseye
USER root
ENV DEBIAN_FRONTEND noninteractive
RUN mkdir /autostart
VOLUME /notebooks
RUN pip install "setuptools<58.0.0" && \
apt update && \
apt upgrade  --yes --no-install-recommends&& \
apt-get install --yes --no-install-recommends \
    build-essential \
    fonts-liberation \
    run-one \
    libzmq \
   && apt-get clean && rm -rf /var/lib/apt/lists/*

RUN pip install pyinstaller wheel jupyter_core jupyterlab

RUN jupyter lab --generate-config

WORKDIR /notebooks
ENTRYPOINT ["jupyter", "lab", "--ip=*", "--allow-root", "--no-browser"]